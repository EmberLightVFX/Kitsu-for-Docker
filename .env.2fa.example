# Example configuration for 2FA enforcement
# Copy these lines to your .env file and uncomment to enable

# ============================================================================
# Two-Factor Authentication Enforcement Configuration (RECOMMENDED METHOD)
# ============================================================================

# Require all users to have 2FA enabled
# When enabled, users without 2FA will be redirected to a friendly page with
# instructions on how to configure it. They can still login but cannot use
# Kitsu until 2FA is configured.
#
# This is the RECOMMENDED method as it:
# - Keeps user accounts active
# - Provides clear instructions
# - Allows immediate self-service configuration
# - No admin intervention required
#
# Options: True, False
# Default: False (disabled)
REQUIRE_2FA=True

# Comma-separated list of user emails exempt from 2FA requirement
# Useful for service accounts, API users, or other automated systems
# Example: service-account@example.com,api-user@example.com
# Default: empty (no exemptions)
2FA_EXEMPT_USERS=

# ============================================================================
# LEGACY: User Account Disabling Method (NOT RECOMMENDED)
# ============================================================================

# This is the OLD method that disables user accounts instead of redirecting
# them. It's kept for backwards compatibility but is NOT RECOMMENDED.
#
# Issues with this method:
# - Users get locked out
# - Requires admin to re-enable them
# - Poor user experience
# - More support burden
#
# Use REQUIRE_2FA=True instead (redirect method above)
#
#REQUIRE_2FA_DISABLE_USERS=True

# ============================================================================
# Example Configurations
# ============================================================================

# SCENARIO 1: Production Deployment (Recommended)
# - Force all users to configure 2FA via friendly redirect
# - Exempt only service accounts
#
# REQUIRE_2FA=True
# 2FA_EXEMPT_USERS=backup-service@example.com,ci-bot@example.com

# SCENARIO 2: Testing / Pilot Program
# - Enable enforcement for testing
# - Exempt all current users temporarily
# - Gradually remove exemptions
#
# REQUIRE_2FA=True
# 2FA_EXEMPT_USERS=user1@example.com,user2@example.com,user3@example.com
# (Later remove users from exempt list in batches)

# SCENARIO 3: New Deployment
# - Enforce from day one
# - No exemptions needed (unless you have service accounts)
#
# REQUIRE_2FA=True
# 2FA_EXEMPT_USERS=

# SCENARIO 4: Disabled (Default)
# - 2FA is available but not required
# - Users can optionally enable it in their profile
#
# REQUIRE_2FA=False
# (or leave commented out)

# ============================================================================
# How Users Configure 2FA
# ============================================================================
#
# When REQUIRE_2FA=True is enabled:
#
# 1. Users can still login normally
# 2. Upon accessing Kitsu, they see a friendly page explaining 2FA is required
# 3. Page shows clear instructions:
#    - Click avatar â†’ Profile
#    - Scroll to "Two-Factor Authentication"
#    - Choose method (TOTP, Email OTP, or FIDO)
#    - Complete setup
# 4. Once configured, they immediately get access to Kitsu
# 5. No admin intervention needed
#
# Available 2FA Methods:
# - TOTP: Use authenticator apps (Google Authenticator, Authy, etc.)
# - Email OTP: Receive codes via email
# - FIDO: Use hardware security keys (YubiKey, etc.)

# ============================================================================
# Useful Commands
# ============================================================================
#
# Check 2FA compliance:
#   docker exec cgwire-zou-app python3 /opt/zou/scripts/enforce_2fa.py --audit
#
# Verify middleware is loaded:
#   docker logs cgwire-zou-app | grep "2FA ENFORCEMENT"
#
# Start with 2FA enforcement:
#   docker-compose -f docker-compose.yaml -f docker-compose.2fa.yaml up -d
